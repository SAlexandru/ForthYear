package com.zumba.claudiuapp.notification;


import java.sql.Timestamp;
import java.util.Calendar;

import com.zumba.claudiuapp.R;

import database.BDNotificari;
import android.app.Activity;
import android.os.Bundle;
import android.widget.ListAdapter;
import android.widget.ListView;

public class NewNotifications extends Activity {
	private ListView   lView;
	private ListAdapter adapterL = null;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_new_notifications);
		
		lView = (ListView)findViewById(R.id.newNList);
		
		loadNotif();
		listenForNotif();
	}

	private void listenForNotif() {
		
		
	}

	private Timestamp getOldNotifTimestamp() {
		Notifications notif = Notifications.getInstance(this);
		
		if (0 == notif.getNumberOfNotif()) {
			Calendar calendar = Calendar.getInstance();
			calendar.add(Calendar.DATE, -14);
		
			return new Timestamp(calendar.getTime().getTime());
		}
		return notif.getOldestNotif().getData();
	}

	private void loadNotif() {
		BDNotificari notificari = new BDNotificari();
		
		notificari.notificariMaiNoiDecatData(getOldNotifTimestamp());
		
		adapterL = new CustomNotificationListAdapter(this, R.layout.news_notification_row, notificari.getNotificari());
		
		
	}
}
