package xmetamodel.factory;

import java.util.Collections;
import java.util.Set;

import xmetamodel.*;
import xmetamodel.implementation.*;

public class FactoryMethod {
   private Set<XEntity> lruCache_;
   public FactoryMethod() {
       lruCache_ = Collections.newSetFromMap(new LRUCache<XEntity, Boolean>(1000));
   }
   public FactoryMethod(int capacity) {
       lruCache_ = Collections.newSetFromMap(new LRUCache<XEntity, Boolean>(capacity));
   }
   public void clearCache() {lruCache_.clear();}
   public XClass createXClass(Object obj) {
       XEntity instance = lruCache_.get(obj);
        if (null == instance) {
           instance = new XClassImpl();
           lruCache_.add(instance);
        }
        return (XClass)instance;
    }
   public XCode createXCode(Object obj) {
       XEntity instance = lruCache_.get(obj);
        if (null == instance) {
           instance = new XCodeImpl;
           lruCache_.add(instance);
        }
        return (XCode)instance;
    }
}
